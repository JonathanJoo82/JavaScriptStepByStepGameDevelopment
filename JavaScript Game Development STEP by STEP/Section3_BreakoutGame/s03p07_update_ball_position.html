<html>
    <head>
        <title>Breakout Game</title>
    </head>
    <body>
        <canvas height="500" width="500" style="border:2px solid#000000" id="ctx"/>
        <!--<canvas height="500" width="500" style="border:2px solid#000000" id="ctx"></canvas>-->

        <script type="text/javascript">
            //now to access the canvas. Need reference the id. 
            var ctx = document.getElementById('ctx').getContext('2d');
            ctx.font = '20px Calibri';
            
            var canvasDimensions = {
                width:500,
                height:500
            };

            var ball = {
                x:0,
                y:0,
                radius:5,
                color:'red',
                speedX:-5,
                speedY:-5
            };

            var base = {
                x:0,
                y:400,
                color:'blue',
                height:20,
                width:100,
                pressingLeft:false,
                pressingRight:false
            };

            document.onkeydown = function(event){
                if(event.keyCode == 37){
                    base.pressingLeft = true;
                    base.pressingRight= false;
                } else if (event.keyCode == 39){
                    base.pressingLeft = false;
                    base.pressingRight= true;
                }
            }

            document.onkeyup = function(event){
                if(event.keyCode == 37){
                    base.pressingLeft = false;
                } else if (event.keyCode == 39){
                    base.pressingRight= false;
                }
            }

            function drawBall(){
                ctx.save();
                ctx.fillStyle = ball.color;
                
                ctx.beginPath();
                ctx.arc(ball.x, ball.y, ball.radius,0,2*Math.PI);
                ctx.fill();

                ctx.restore();
            }
            
            function drawBase(){
                ctx.save();
                ctx.fillStyle = base.color;
                ctx.fillRect(base.x, base.y, base.width, base.height);
                ctx.restore();
            }

            function updateBarPosition(){
                if(base.pressingLeft){
                    base.x = base.x - 5;
                } else if(base.pressingRight){
                    base.x =base.x + 5;
                }

                //boundry conditions
                if(base.x < 0){
                    base.x = 0;
                } else if (base.x > canvasDimensions.width-base.width){
                    base.x = canvasDimensions.width-base.width;
                }
            }

            function updateBallPosition(){
                ball.x += ball.speedX;
                ball.y += ball.speedY;

                if(ball.x > canvasDimensions.width || ball.x < 0){
                    ball.speedX = -ball.speedX;
                } 
                if(ball.y > canvasDimensions.height || ball.y < 0){
                    ball.speedY = -ball.speedY;
                }
            }
            

            function updateGame(){
                ctx.clearRect(0,0,canvasDimensions.width, canvasDimensions.height);
                updateBarPosition();
                updateBallPosition()
                drawBall();
                drawBase();
            }


            function startGame(){
                //can set x and y to random
                base.x = 150;
                ball.x = base.x + 100;
                ball.y = base.y - 100;
                setInterval(updateGame, 10);
            }
            startGame();
            
        </script>
    </body>
</html>
